{% assign host = request.host %}
{% assign host_arr = host | split: '.' %}
{% assign is_subdomain = false %}
{% if host_arr.size >= 3 %}
  {% assign is_subdomain = true %}
  {% assign subdomain = host_arr[0] %}
{% endif %}
<div id="main-content" class="page-main page-wrapper">
    <nav class="breadcrumbs" aria-label="breadcrumbs">
      <ul class="items">
        <li class="item home">
          <a href="/" title="Go to Home Page">Home</a>
          <span class="icon" aria-hidden="true"></span>
        </li>
        {% if collection.metafields.custom.parent_category %}
          <li class="item">
            {% assign collection_parent = collections[collection.metafields.custom.parent_category] %}
            <a href="{{ collection_parent.url }}" >{{ collection_parent.title }}</a>
            <span class="icon" aria-hidden="true"></span>
          </li>
        {% endif %}
        <li class="item category6940">
          <strong>{{ collection.title }}</strong>
        </li>
      </ul>
    </nav>
    <div class="columns">
      <div class="column main">
         <input name="form_key" type="hidden" value="UxbR7TJdQwixPtD6"> 
         <div id="authenticationPopup" data-bind="scope:'authenticationPopup', style: {display: 'none'}" style="display: none;">
            <!-- ko template: getTemplate() -->
            <!-- /ko -->
         </div>
         <div></div>
         <!-- Yotpo - Add body class --><!--/ Yotpo - Add body class --><!-- Yotpo - Widget Script --><!--/ Yotpo - Widget Script -->           
         <div class="toolbar toolbar-products">
            {% assign shown = paginate.page_size | plus: paginate.current_offset %}
      <p class="toolbar-amount" id="toolbar-amount"> Show <span class="toolbar-number" id="shown-number"></span> Items total of <span class="toolbar-number" id="collection-size" data-collection-size="{{ collection.products_count }}">{% unless is_subdomain %}{{ collection.products_count }}{% endunless %}</span> </p>
            <div class="toolbar-sorter sorter">
               <label class="sorter-label" for="sorter">Sort By</label> 
               <select id="sorter" data-role="sorter" class="sorter-options">
                  <option value="" {% unless collection.sort_by %}selected="selected"{% endunless %} disabled="true">Sort By</option>
                  <option value="best-selling" {% if collection.sort_by == 'best-selling' %}selected="selected"{% endif %}>Best Sellers</option>
                  <option value="title-ascending"{% if collection.sort_by == 'title-ascending' %}selected="selected"{% endif %}>Product Name</option>
                  <option value="created-descending"{% if collection.sort_by == 'created-descending' %}selected="selected"{% endif %}>Publish Date</option>
               </select>
               <a title="Set Ascending Direction" href="#" class="action sorter-action sort-desc" data-role="direction-switcher" data-value="asc"><span class="visually-hidden">Set Ascending Direction</span> <i class="icon" aria-hidden="true"></i></a> 
            </div>
            <div class="field limiter">
               <label class="label" for="limiter"></label> 
               <div class="control">
                  <select id="limiter" data-role="limiter" class="limiter-options">
                     <option value="32" selected="selected">32</option>
                     <option value="48">48</option>
                  </select>
                  <ul>
                     <li data-value="32" class="active grid-size-selector"><a style="color:inherit;" href="{{ collection.url | append: '?view=32' }}">32</a></li>
                     <li data-value="48" class="grid-size-selector"><a style="color:inherit;" href="{{ collection.url | append: '?view=48' }}">48</a></li>
                  </ul>
               </div>
            </div>
         </div>
  
         <div class="products wrapper grid products-grid">
            <ol class="products list items product-items">
            </ol>
         </div>
         
         <div class="toolbar toolbar-products">
            <div class="pages" id="pagination"></div>
         </div>
      </div>
      <div class="sidebar sidebar-main" {% if is_subdomain %}style="display: none;"{% endif %}>
        {% render 'collection-filters' %}
         <div class="row image-middel">
            <div class="middle-banner">
               <style>#html-body [data-pb-style=ILGK9DO]{justify-content:center;display:flex;flex-direction:column;background-position:left top;background-size:cover;background-repeat:no-repeat;background-attachment:scroll;border-width:0}#html-body [data-pb-style=EW150M2]{border-width:0}#html-body [data-pb-style=BCKMI5C]{text-align:center;border-style:none}#html-body [data-pb-style=ETXW5VS],#html-body [data-pb-style=OU8TDCP]{border-width:0;max-width:100%;height:auto}@media only screen and (max-width: 768px) { #html-body [data-pb-style=BCKMI5C]{border-style:none} }</style>
               <div data-content-type="row" data-appearance="full-width" data-enable-parallax="0" data-parallax-speed="0.5" data-background-images="{}" data-background-type="image" data-video-loop="true" data-video-play-only-visible="true" data-video-lazy-load="true" data-video-fallback-src="" data-box-model="{&quot;desktop&quot;:{&quot;margin&quot;:{&quot;top&quot;:&quot;0px&quot;,&quot;right&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;0px&quot;},&quot;padding&quot;:{&quot;top&quot;:&quot;0px&quot;,&quot;right&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;0px&quot;}}}" data-element="main" data-pb-style="ILGK9DO" class="box-model-64af6218f3bca">
                  <div class="row-full-width-inner" data-element="inner">
                     <div data-content-type="html" data-appearance="default" data-box-model="{&quot;desktop&quot;:{&quot;margin&quot;:{&quot;top&quot;:&quot;0px&quot;,&quot;right&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;0px&quot;},&quot;padding&quot;:{&quot;top&quot;:&quot;0px&quot;,&quot;right&quot;:&quot;0px&quot;,&quot;bottom&quot;:&quot;0px&quot;,&quot;left&quot;:&quot;0px&quot;}}}" data-element="main" data-pb-style="EW150M2" data-decoded="true" class="box-model-64af6218f3bdb">
                        <style>
                           .middle-banner + img {
                           display: none;
                           }
                           .middle-banner [data-content-type=row][data-appearance=full-width]>.row-full-width-inner {
                           padding: 0;
                           }
                        </style>
                     </div>
                     <figure data-content-type="image" data-appearance="full-width" data-element="main" data-pb-style="BCKMI5C" class="box-model-64af6218f3be6">
                        <a href="{{ settings.sidebar_banner_link }}" target="" data-link-type="default" data-element="link">
                          {% if settings.sidebar_banner_img != blank %}
                            <img class="pagebuilder-mobile-hidden box-model-64af6218f3bf0" src="{{ settings.sidebar_banner_img | img_url: 'master' }}" alt="{{ settings.sidebar_banner_img.alt }}" data-element="desktop_image" data-pb-style="ETXW5VS">
                            <img class="pagebuilder-mobile-only box-model-64af6218f3bfa" src="{{ settings.sidebar_banner_img | img_url: 'master' }}" alt="{{ settings.sidebar_banner_img.alt }}" data-element="mobile_image" data-pb-style="OU8TDCP">
                          {% endif %}
                        </a>
                     </figure>
                  </div>
               </div>
            </div>
            <img src="https://www.booksio.com/media/wysiwyg/middle-banner.png" alt="Middle Banner">
         </div>
      </div>
    </div>
  </div>
  
  <script>
    var limit = 250;
    var gridSize = 32;
    var productUrlJson = "/collections/{{ collection.handle }}/products.json?limit=" + limit;
    var restrictedFormats, restrictedTags, isPartnerSite;
    {% if is_subdomain %}
      restrictedFormats = '{{ shop.metaobjects["partner_store_settings"][subdomain].restricted_formats }}';
      restrictedTags = `{{ shop.metaobjects["partner_store_settings"][subdomain].restricted_tags | strip | newline_to_br | strip_newlines }}`;
      isPartnerSite = true;
    {% endif %}
  </script>
  {{ 'jquery-ui.min.css' | asset_url | stylesheet_tag }}
  {{ 'jquery-ui.theme.min.css' | asset_url | stylesheet_tag }}
  {{ 'jquery-ui.min.js' | asset_url | script_tag }}
  {{ 'jquery.ui.touch-punch.min.js' | asset_url | script_tag }}
  {{ 'collection.js' | asset_url | script_tag }}
  
  <style>
    .breadcrumbs {
      display: block !important;
    }
    .ui-slider-horizontal .ui-slider-handle {
      top: 0;
    }
    .product-image-container-8573004 {
      width: 351px;
    }
    .product-image-container-8573004 span.product-image-wrapper {
      padding-bottom: 125%;
    }
    .toolbar.toolbar-products .pages .item {
      padding: 0 !important;
    }
    #pagination a.page,
    #pagination strong.page {
      display: block;
    }
    .filter-actions {
      margin: 0;
    }
  </style>
  
  {% schema %}
    {
      "name": "Collection",
      "presets": [
        {
          "category": "Custom Content",
          "name": "Collection"
        }
      ]
    }
  {% endschema %}